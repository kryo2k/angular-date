/*!
* angular-date
* Simple & useful, native date manipulation library for Angular 1.x
* @license GPL
* @author Hans Doller <hans@ticonerd.com>
*/
angular.module("ngDate",[]).service("$date",function(){var t={week:["wk","week","weeks"],ms:["ms","milli","millisecond","milliseconds"],sec:["s","sec","second","seconds"],min:["min","minute","minutes"],hr:["h","hr","hrs","hour","hours"],day:["d","day","days"],mon:["mon","month","months"],year:["y","year","years"]},e={ms:1,sec:1e3,min:6e4,hr:36e5,day:864e5,week:6048e5};this.SUNDAY=0,this.MONDAY=1,this.TUESDAY=2,this.WEDNESDAY=3,this.THURSDAY=4,this.FRIDAY=5,this.SATURDAY=6,this.JANUARY=0,this.FEBRUARY=1,this.MARCH=2,this.APRIL=3,this.MAY=4,this.JUNE=5,this.JULY=6,this.AUGUST=7,this.SEPTEMBER=8,this.OCTOBER=9,this.NOVEMBER=10,this.DECEMBER=11,this.ms=function(t){var e=Date.now();if(angular.isDate(t))e=t.getTime();else if(angular.isNumber(t))e=t;else if(angular.isString(t)){var s=Date.parse(t);isNaN(s)||(e=s)}return e},this.now=function(t){return angular.isDate(t)?t:new Date(this.ms(t))},this.validDay=function(t){return angular.isNumber(t)&&!isNaN(t)&&t>=this.SUNDAY&&t<=this.SATURDAY},this.nearestDay=function(t,e){return t=this.validDay(t)?t:this.THURSDAY,e=this.now(this.ms(e)),e.setDate(e.getDate()+(t-e.getDay())),e},this.futureDay=function(t,e){var s=this.nearestDay(t,e);return s<this.now(e)&&s.setDate(s.getDate()+7),s},this.pastDay=function(t,e){var s=this.nearestDay(t,e);return s>this.now(e)&&s.setDate(s.getDate()-7),s},this.dayOfYear=function(t){t=this.now(t);var e=[0,31,59,90,120,151,181,212,243,273,304,334],s=t.getMonth(),i=t.getDate(),n=e[s]+i;return s>1&&this.isLeapYear(t)&&n++,n},this.firstOfYear=function(t,e){return t=angular.isNumber(t)?t:(new Date).getFullYear(),e?new Date(Date.UTC(t,this.JANUARY,1,0,0,0,0)):new Date(t,0,1,0,0,0)},this.lastOfYear=function(t,e){return e?new Date(Date.UTC(t,this.DECEMBER,31,23,59,59,999)):new Date(t,this.DECEMBER,31,23,59,59,999)},this.daysInYear=function(t){return this.dayOfYear(this.lastOfYear(t))},this.daysInMonth=function(t,e,s){return this.lastOfMonth(t,e,s).getDate()},this.firstOfMonth=function(t,e,s){return s?new Date(Date.UTC(e,t,1,0,0,0,0)):new Date(e,t,1,0,0,0,0)},this.lastOfMonth=function(t,e,s){var i=this.firstOfMonth(t+1,e,s);return new Date(i-1)},this.utcOffset=function(t){return this.now(t).getTimezoneOffset()*e.min},this.stdTimezoneOffset=function(t){var t=this.now(t),e=new Date(t.getFullYear(),0,1),s=new Date(t.getFullYear(),6,1);return Math.max(this.utcOffset(e),this.utcOffset(s))},this.dstOffset=function(t){var e=this.stdTimezoneOffset(),s=this.utcOffset(t);return e>s?e-s:0},this.isDST=function(t){return this.utcOffset(t)<this.stdTimezoneOffset()},this.isLeapYear=function(t){var e=this.now(t).getFullYear();return 0!=(3&e)?!1:e%100!=0||e%400==0},this.getYearWeek=function(t,s){t=this.pastDay(s,t);var i=this.firstOfYear(t.getFullYear()),n=Math.ceil(((t.getTime()-i.getTime())/e.day+1)/7);return[t.getFullYear(),n,t,new Date(t.getTime()+(e.week-1))]},this.round=function(s,i,n){n=angular.isFunction(n)?n:Math.round,s=this.ms(s);var r=function(t,e){if(!angular.isNumber(t))return NaN;if(angular.isNumber(e)){var s=t%e,i=n(s/e)*e;return t-s+i}return n(t)},a=function(t,s){return r(t,s)*e.day},h=function(t){var e=this.utcOffset(s);return new Date(r(s-e,t)+e)}.bind(this);switch(i=String(i||"ms").toLowerCase(),!0){case t.ms.indexOf(i)>-1:return h(e.ms);case t.sec.indexOf(i)>-1:return h(e.sec);case t.min.indexOf(i)>-1:return h(e.min);case t.hr.indexOf(i)>-1:return h(e.hr);case t.day.indexOf(i)>-1:return h(e.day)}var u=new Date(s),o=u.getMonth(),f=u.getFullYear(),c=u.getDate();switch(!0){case t.mon.indexOf(i)>-1:return new Date(this.firstOfMonth(o,f).getTime()+a(c,this.daysInMonth(o,f)));case t.year.indexOf(i)>-1:return new Date(this.firstOfYear(f).getTime()+a(this.dayOfYear(u),this.daysInYear(f)))}return!1},this.ceil=function(t,e){return this.round(t,e,Math.ceil)},this.floor=function(t,e){return this.round(t,e,Math.floor)},this.startOf=function(t,e){return this.floor(t,e)},this.endOf=function(t,e){return new Date(this.ceil(t,e).getTime()-1)},this.compare=function(t,e){var s=this.ms(t),i=this.ms(e);return s>i?1:i>s?-1:0},this.between=function(t,e,s){return this.compare(t,e)>=0&&this.compare(t,s)<=0},this.equal=function(e,s,i,n){var r=[],a=this.getYearWeek.bind(this),h=function(){var t=a(this,n);return t.slice(0,2).join("-")};switch(i=String(i||"ms").toLowerCase(),!0){case t.week.indexOf(i)>-1:r.push(h);break;case t.ms.indexOf(i)>-1:r.push(Date.prototype.getMilliseconds);case t.sec.indexOf(i)>-1:r.push(Date.prototype.getSeconds);case t.min.indexOf(i)>-1:r.push(Date.prototype.getMinutes);case t.hr.indexOf(i)>-1:r.push(Date.prototype.getHours);case t.day.indexOf(i)>-1:r.push(Date.prototype.getDate);case t.mon.indexOf(i)>-1:r.push(Date.prototype.getMonth);case t.year.indexOf(i)>-1:r.push(Date.prototype.getFullYear)}return e=this.now(e),s=this.now(s),r.every(function(t){return t.call(e)===t.call(s)})}});