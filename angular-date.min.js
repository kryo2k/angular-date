/*!
* angular-date
* Simple & useful, native date manipulation library for Angular 1.x
* @license GPL
* @author Hans Doller <hans@ticonerd.com>
*/
angular.module("ngDate",[]).service("$date",function(){var t={week:["wk","week","weeks"],ms:["ms","milli","millisecond","milliseconds"],sec:["s","sec","second","seconds"],min:["min","minute","minutes"],hr:["h","hr","hrs","hour","hours"],day:["d","day","days"],mon:["mon","month","months"],year:["y","year","years"]},e={ms:1,sec:1e3,min:6e4,hr:36e5,day:864e5,week:6048e5};this.SUNDAY=0,this.MONDAY=1,this.TUESDAY=2,this.WEDNESDAY=3,this.THURSDAY=4,this.FRIDAY=5,this.SATURDAY=6,this.ms=function(t){var e=Date.now();if(angular.isDate(t))e=t.getTime();else if(angular.isNumber(t))e=t;else if(angular.isString(t)){var n=Date.parse(t);isNaN(n)||(e=n)}return e},this.now=function(t){return angular.isDate(t)?t:new Date(this.ms(t))},this.validDay=function(t){return angular.isNumber(t)&&!isNaN(t)&&t>=this.SUNDAY&&t<=this.SATURDAY},this.nearestDay=function(t,e){return t=this.validDay(t)?t:this.THURSDAY,e=this.now(this.ms(e)),e.setDate(e.getDate()+(t-e.getDay())),e},this.futureDay=function(t,e){var n=this.nearestDay(t,e);return n<this.now(e)&&n.setDate(n.getDate()+7),n},this.pastDay=function(t,e){var n=this.nearestDay(t,e);return n>this.now(e)&&n.setDate(n.getDate()-7),n},this.dayOfYear=function(t){t=this.now(t);var e=[0,31,59,90,120,151,181,212,243,273,304,334],n=t.getMonth(),s=t.getDate(),i=e[n]+s;return n>1&&this.isLeapYear(t)&&i++,i},this.firstOfYear=function(t,e){return t=angular.isNumber(t)?t:(new Date).getFullYear(),e?new Date(Date.UTC(t,this.JANUARY,1,0,0,0,0)):new Date(t,0,1,0,0,0)},this.lastOfYear=function(t,e){return e?new Date(Date.UTC(t,11,31,23,59,59,999)):new Date(t,11,31,23,59,59,999)},this.daysInYear=function(t){return this.dayOfYear(this.lastOfYear(t))},this.daysInMonth=function(t,e,n){return this.lastOfMonth(t,e,n).getDate()},this.firstOfMonth=function(t,e,n){return n?new Date(Date.UTC(e,t,1,0,0,0,0)):new Date(e,t,1,0,0,0,0)},this.lastOfMonth=function(t,e,n){var s=this.firstOfMonth(t+1,e,n);return new Date(s-1)},this.utcOffset=function(t){return this.now(t).getTimezoneOffset()*e.min},this.stdTimezoneOffset=function(t){var t=this.now(t),e=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),6,1);return Math.max(this.utcOffset(e),this.utcOffset(n))},this.dstOffset=function(t){var e=this.stdTimezoneOffset(),n=this.utcOffset(t);return e>n?e-n:0},this.isDST=function(t){return this.utcOffset(t)<this.stdTimezoneOffset()},this.isLeapYear=function(t){var e=this.now(t).getFullYear();return 0!=(3&e)?!1:e%100!=0||e%400==0},this.getYearWeek=function(t,n){t=this.pastDay(n,t);var s=this.firstOfYear(t.getFullYear()),i=Math.ceil(((t.getTime()-s.getTime())/e.day+1)/7);return[t.getFullYear(),i,t,new Date(t.getTime()+(e.week-1))]},this.round=function(n,s,i){i=angular.isFunction(i)?i:Math.round,n=this.ms(n);var r=function(t,e){if(!angular.isNumber(t))return NaN;if(angular.isNumber(e)){var n=t%e,s=i(n/e)*e;return t-n+s}return i(t)},a=function(t,n){return r(t,n)*e.day},u=function(t){var e=this.utcOffset(n);return new Date(r(n-e,t)+e)}.bind(this);switch(s=String(s||"ms").toLowerCase(),!0){case t.ms.indexOf(s)>-1:return u(e.ms);case t.sec.indexOf(s)>-1:return u(e.sec);case t.min.indexOf(s)>-1:return u(e.min);case t.hr.indexOf(s)>-1:return u(e.hr);case t.day.indexOf(s)>-1:return u(e.day)}var h=new Date(n),o=h.getMonth(),f=h.getFullYear(),c=h.getDate();switch(!0){case t.mon.indexOf(s)>-1:return new Date(this.firstOfMonth(o,f).getTime()+a(c,this.daysInMonth(o,f)));case t.year.indexOf(s)>-1:return new Date(this.firstOfYear(f).getTime()+a(this.dayOfYear(h),this.daysInYear(f)))}return!1},this.ceil=function(t,e){return this.round(t,e,Math.ceil)},this.floor=function(t,e){return this.round(t,e,Math.floor)},this.startOf=function(t,e){return this.floor(t,e)},this.endOf=function(t,e){return new Date(this.ceil(t,e).getTime()-1)},this.compare=function(t,e){var n=this.ms(t),s=this.ms(e);return n>s?1:s>n?-1:0},this.between=function(t,e,n){return this.compare(t,e)>=0&&this.compare(t,n)<=0},this.equal=function(e,n,s,i){var r=[],a=this.getYearWeek.bind(this),u=function(){var t=a(this,i);return t.slice(0,2).join("-")};switch(s=String(s||"ms").toLowerCase(),!0){case t.week.indexOf(s)>-1:r.push(u);break;case t.ms.indexOf(s)>-1:r.push(Date.prototype.getMilliseconds);case t.sec.indexOf(s)>-1:r.push(Date.prototype.getSeconds);case t.min.indexOf(s)>-1:r.push(Date.prototype.getMinutes);case t.hr.indexOf(s)>-1:r.push(Date.prototype.getHours);case t.day.indexOf(s)>-1:r.push(Date.prototype.getDate);case t.mon.indexOf(s)>-1:r.push(Date.prototype.getMonth);case t.year.indexOf(s)>-1:r.push(Date.prototype.getFullYear)}return e=this.now(e),n=this.now(n),r.every(function(t){return t.call(e)===t.call(n)})}});